<h1 align="center">Making a RESTful API capable of performing CRUD operations on request</h1>
<p>
  <img alt="Version" src="https://img.shields.io/badge/version-1.0.0-blue.svg?cacheSeconds=2592000" />
  <a href="#" target="_blank">
    <img alt="License: ISC" src="https://img.shields.io/badge/License-ISC-yellow.svg" />
  </a>
</p>
<p>
  <li>
    <ul>This project should be abe to perfrom all CRUD operations using node,express, mongoDB and mongoose</ul>
    <ul>It should also be able to handle dynamic parameters.</ul>
  </li>
</p>

## Installations

```sh
npm install express nodemon mongoose 
```

## Run tests

```sh
npm run dev
```

## Usage
After installing all dependencies, we initiallly set up the server on a localhost usinga port to ensure it's live and running by importing express in the server.js file
```sh
const express = require('express')
const app = express()
```
Then I set up the port to listen on the localhost
```sh
const port = process.env.PORT || 8000
app.listen(port, ()=>{
  `Server is listening on port ${port}`
})
```
I connected to MongoDB using Mongoose through the MongoURI gotten directly from MongoDB and set the code to return errors if it there's a problem and to send an okay message if it connects.
Then I used the Schema and Model to set up how my documents should be returned before proceeding to stating my routes.
```sh
mongoose.set("strictQuery", false);
mongoose
  .connect(mongoUri)
```



for all for operations I used:
```sh
app.get() to fetch documents fro the database
app.post() to add documents to the database
app.put() to updaate documents in the database
app.delete() to remove any documents from the database
```
all operations can be performed by sending a request to fetch a user with an id auto-generated by MongoDB.

I also used middleware to ensure that the requests gets sent in the proper (json) format, so our request returnds the appropriate info.
```sh
app.use(express.json());
app.use(express.urlencoded({ extended: false }))
```

The routes help to navigate the document by id as shown:
```sh
app.put("/api/user_id/:id", async (req, res) => {
  try {
    const { id } = req.params;
    const options = { new: true };
    const person = await Person.findByIdAndUpdate(id, req.body, options);
    if (!person) {
      return res
        .status(404)
        .json({ message: `cannot find any person with ID:${id}` });
    }
    const updatedPerson = await Person.findById(id);
    res.status(200).json(updatedPerson);
  } catch (error) {
    console.log(error.message);
    res.status(500).json({ message: error.message });
  }
});

```
In the above code, we can update the name of a user by firstly navigating to their id through the route. I used an async function since we're fetching from a database and there could be delays. In the person variable,  I used the findByIdAndUpdate method with three arguments, the id - to help get the id, the req.body - to hold the information from the database and options - to help update the database as soon as changes are made. I also added conditions to display error messages if the operation is successful or not. 
This was the format I used for all operations in the code.


## Credits
I'm honestly still new to all this so I had lots of help from Youtube and google before putting it all together.










